<!DOCTYPE html>
<html>
   <head>
      <script type = "text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>
      <style>
		   
		  svg text {
            fill: purple;
            font: 12px sans-serif;
            text-anchor: end;
         }
		 .title{
		  fill: black;
		 }
      </style>
   </head>

   <body>
      <script language = "javascript">
	    var data = [4, 8, 15, 16, 23, 42];
		var barHeight = 420,
     		scaleFactor = 10,
			barWidth = 20;
			
        var body = d3.select("body")
		    .append("svg")
			.attr("height", 550)
            .attr("width", 900);
		
		var frame = body.append("rect")
			.attr("x", 5)
			.attr("y", 5)
			.attr("width", 890)
			.attr("height", 540)
			.style("fill", "white")
			.style("stroke", "black")
			.style("stroke-width", 1);
		
		var textArea = body.append("g")
		    .attr("transform", "translate(445, 20)");
            
		textArea.append("text")
		    .text("Gross Domestic Product")
            .attr("class", "title")			
		////////////////////////////////////////////////////////////////  			
        var graph = body.append("g")
		    .attr("transform", "translate(20, 20)");
			
		var bar = graph.selectAll("g")
		    .data(data)
			.enter()
			.append("g")
			.attr("transform", function(d, i){
			  return "translate(" + i * barWidth + "," + (barHeight - d*scaleFactor) + ")";
			})
			
		//adds dynamic color to the bars
		bar.attr("fill", "steelblue")
			.attr("id", function(d, i){
			  return i;
			})
			.on("mouseover", handleOnMouseOver)
			.on("mouseout", handleMouseOut)
			
		bar.append("rect")
           .attr("height", function(d){
		     return d * scaleFactor;
		   })	
           .attr("width", barWidth - 1);		   
	    
		bar.append("text")
		   .attr("y", 12)
		   .attr("x", barWidth / 2)
		   .attr("dx", ".35em") 
		   .text(function(d){ return d; });
		var chartInfo = bar.append("g")   
			
		function handleOnMouseOver(d, i){
		  d3.select(this).attr("fill", "#B4CCE1")
		
		var coords = d3.mouse(this);
		var chartInfo = graph.append("g")
		    .attr("id", "value"+d+"OfIndex"+i)

		   chartInfo.append("rect")
			.attr("height", 50)
			.attr("width", 150)
			.attr("x", (i+1) * barWidth)
			.attr("y", (coords[1] + (barHeight - d*scaleFactor)))
			.attr("width", 150)
			.attr("rx", 5)
			.attr("ry", 5)
			.style("fill", "#B4CCE1")
			
	      chartInfo.append("text")
			.text(function(){ return d;})
            .attr("x", (i+1) * barWidth + 20)
			.attr("y", (coords[1] + (barHeight - d*scaleFactor) + 25))		
            .attr("fill", "#FEFEFE")
		}
		function handleMouseOut(d, i) {
		  d3.select(this).attr("fill", "steelBlue")
		  d3.select("#value"+d+"OfIndex"+i).remove();
		}
		////////////////////////////////////////////////////////////////  
		var axisContainer = body.append("g")
		.attr("transform", "translate(20, 20)")
            	
		var xscale = d3.scaleLinear()
		    .domain([0, d3.max(data)])
			.range([0, barWidth * data.length]);
		
		var yscale = d3.scaleLinear()
           .domain([0, d3.max(data)])
           .range([barHeight, 0]);
		  
		var x_axis = d3.axisBottom()
            .scale(xscale);
			
        var y_axis = d3.axisRight()
            .scale(yscale);
			
		axisContainer.append("g")
            .attr("transform", "translate(0, 0)")
            .call(y_axis);
			
        var xAxisTranslate = barHeight;		
		
		axisContainer.append("g")
            .attr("transform", "translate(0, " + xAxisTranslate + ")")
            .call(x_axis)
		
      </script>
   </body>
</html>